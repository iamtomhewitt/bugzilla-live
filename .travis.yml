matrix:
  include:
  - language: node_js
    node_js:
    - stable
    dist: trusty
    install:
    - cd backend && npm install && cd ..
    script:
    - cd backend && npm test && cd ..
  - language: java
    jdk:
    - openjdk8
    script: cd frontend && mvn test
deploy:
  provider: releases
  release_notes_file: "build/release-notes.md"
  api_key:
    secure: $GITHUB_TOKEN
  file: "dist/bugzilla-live.zip"
  skip_cleanup: true
  on:
    tags: true
    repo: iamtomhewitt/bugzilla-live